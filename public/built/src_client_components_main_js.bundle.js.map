{"version":3,"file":"src_client_components_main_js.bundle.js","mappings":"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ACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;AClMwC;AACwB;AACV;AACyB;AAChD;AAC6B;AAClB;AACJ;AAC6D;AACvD;AACV;AAElC,SAAS2D,QAAQA,CAACxG,KAAK,EAAE;EACzB;;EAEC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;EAEC;EACC;AACF;AACA;EACE;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;EACE;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;EAEE;EACA;;EAEA;AACF;AACA;EACE;EACD;;EAEA;EACC;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;EAEE;EACA;EACA;AACF;AACA;AACA;;EAEC,IAAMS,QAAQ,GAAGd,wDAAW,CAAC,CAAC;EAE9B,IAAMU,QAAQ,GAAGX,wDAAW,CAAC,UAACQ,KAAK;IAAA,OAAKA,KAAK,CAACI,YAAY,CAACD,QAAQ;EAAA,EAAC;EACpE,IAAMoG,kBAAkB,GAAG/G,wDAAW,CAAC,UAACQ,KAAK;IAAA,OAAKA,KAAK,CAACC,iBAAiB,CAACsG,kBAAkB;EAAA,EAAC;EAE7F,IAAIC,KAAK;EACN,IAAIrG,QAAQ,CAACW,QAAQ,EACjB0F,KAAK,GAAGL,oFAAyB,MAEjCK,KAAK,GAAGJ,gFAAqB;EAEjC,IAAAK,MAAA,GAAmCD,KAAK,CAACrG,QAAQ,CAAC;IAA1CM,IAAI,GAAAgG,MAAA,CAAJhG,IAAI;IAAEC,KAAK,GAAA+F,MAAA,CAAL/F,KAAK;IAAEC,SAAS,GAAA8F,MAAA,CAAT9F,SAAS;;EAEjC;EACC;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;EACK;AACL;AACA;EACI;AACJ;AACA;AACA;AA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SAAS,EAAC;IAAY,GAAE,cAAc,GAAG,CAAChC,KAAK,CAAC6H,QAAQ,GAAG,IAAI,EAAES,OAAO,CAAC,CAAC,CAAC,GAAG,IAAY,CAAI,CAAC,eAC5HjJ,0DAAA,yBAAGA,0DAAA;MAAO2C,SAAS,EAAC;IAAY,GAAE+C,OAAe,CAAI,CAChD;EAAC;EAET;AACD;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,iEAAeyB,QAAQ,EAAC;;AAExB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACpoB0B;AAES;AACe;AACd;AAAA,IAEf+B,IAAI,0BAAApE,gBAAA;EAAAC,SAAA,CAAAmE,IAAA,EAAApE,gBAAA;EAAA,IAAAE,MAAA,GAAAC,YAAA,CAAAiE,IAAA;EAErB,SAAAA,KAAYvI,KAAK,EAAE;IAAAuE,eAAA,OAAAgE,IAAA;IAAA,OAAAlE,MAAA,CAAAG,IAAA,OACTxE,KAAK;EACf;EAACyE,YAAA,CAAA8D,IAAA;IAAA7D,GAAA;IAAAC,KAAA,EAED,SAAAC,OAAA,EAAS;MACL;MACA,IAAI,IAAI,CAAC5E,KAAK,CAACsD,KAAK,IAAIP,MAAM,CAACC,QAAQ,CAACC,QAAQ,KAAK,GAAG,EAAE;QACtD,oBACI5D,0DAAA;UAAK2C,SAAS,EAAC;QAAgB,gBAC3B3C,0DAAA;UAAK2C,SAAS,EAAC;QAAyG,gBACpH3C,0DAAA,CAACU,4DAAa,MAAE,CACf,CAAC,eACNV,0DAAA;UAAK2C,SAAS,EAAC;QAA8D,gBACzE3C,0DAAA,CAACmH,kDAAQ,MAAE,CACV,CACJ,CAAC;MAEd,CAAC,MACI;QACD,oBACInH,0DAAA,CAACwD,8CAAc,MAAE,CAAC;MAE1B;IACJ;EAAC;EAAA,OAAA0F,IAAA;AAAA,EAzB6BlJ,wDAAe;;;;;;;;;;;;;;;;ACN1C,SAASkH,QAAQA,CAACkC,IAAI,EAAEC,IAAI,EAAEC,IAAI,EAAEC,IAAI,EAAE;EAC7C,IAAIC,CAAC,GAAG,IAAI,CAAC,CAAC;EACd,IAAIC,IAAI,GAAGC,KAAK,CAACJ,IAAI,GAACF,IAAI,CAAC;EAC3B,IAAIO,IAAI,GAAGD,KAAK,CAACH,IAAI,GAACF,IAAI,CAAC;EAC3B,IAAID,IAAI,GAAGM,KAAK,CAACN,IAAI,CAAC;EACtB,IAAIE,IAAI,GAAGI,KAAK,CAACJ,IAAI,CAAC;EAEtB,IAAIM,CAAC,GAAGC,IAAI,CAACC,GAAG,CAACL,IAAI,GAAC,CAAC,CAAC,GAAGI,IAAI,CAACC,GAAG,CAACL,IAAI,GAAC,CAAC,CAAC,GAC3CI,IAAI,CAACC,GAAG,CAACH,IAAI,GAAC,CAAC,CAAC,GAAGE,IAAI,CAACC,GAAG,CAACH,IAAI,GAAC,CAAC,CAAC,GAAGE,IAAI,CAACE,GAAG,CAACX,IAAI,CAAC,GAAGS,IAAI,CAACE,GAAG,CAACT,IAAI,CAAC;EACrE,IAAIU,CAAC,GAAG,CAAC,GAAGH,IAAI,CAACI,KAAK,CAACJ,IAAI,CAACK,IAAI,CAACN,CAAC,CAAC,EAAEC,IAAI,CAACK,IAAI,CAAC,CAAC,GAACN,CAAC,CAAC,CAAC;EACpD,IAAIO,CAAC,GAAGX,CAAC,GAAGQ,CAAC;EACb,OAAOG,CAAC;AACZ;;AAEA;AACO,SAAST,KAAKA,CAACU,KAAK,EAAE;EACzB,OAAOA,KAAK,GAAGP,IAAI,CAACQ,EAAE,GAAG,GAAG;AAChC","sources":["webpack://fartza.ru/./src/client/components/category/categories.js","webpack://fartza.ru/./src/client/components/category/link.js","webpack://fartza.ru/./src/client/components/goods.js","webpack://fartza.ru/./src/client/components/goods_min.js","webpack://fartza.ru/./src/client/components/main.js","webpack://fartza.ru/./src/client/math/distance"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\r\n\r\nimport { useFetchAllCategoriesQuery } from \"../../store/services/categories_service\";\r\n\r\nimport Link from \"./link\";\r\n\r\nimport { useSelector, useDispatch } from \"react-redux\";\r\nimport { setCategory, setCategoryName } from \"../../store/reducers/categories_slice\";\r\nimport { setLastArgs } from \"../../store/reducers/goods_slice\";\r\n\r\n/*export const categories = {\r\n\t\"Статьи\": [\r\n\t\t\"Новинки\",\"Тренды\",\"Коллаборации\"\r\n\t],\r\n\t\"Одежда\": [\r\n\t\t\"Б/У\",\"Российское\",\"ХендМейд\",\"Обувь\",\"Верх\",\"Низ\", \"Головные уборы\"\r\n\t]\r\n};*/\r\n\r\nfunction CategoriesBar(props) {\r\n\r\n\t//const [isActive, setIsActive] = useState(null);\r\n\r\n\t//ИМЯ РЕДЬЮСЕРА ЗАДАЕТСЯ В STORE.JS В CONFIGUREREDUCER А НЕ В САМОМ РЕДЬЮСЕРЕ В СТРОКЕ\r\n\tconst isActive = useSelector((state) => state.categoriesReducer.activeCategory)\r\n\tconst lastArgs = useSelector((state) => state.goodsReducer.lastArgs)\r\n\tconsole.log(isActive)\r\n    const dispatch = useDispatch()\r\n\r\n\tconst {data, error, isLoading} = useFetchAllCategoriesQuery();\r\n\r\n\t/*useEffect(() => {\r\n\t\tif (data) {\r\n\t\t\tlet searchParams = new URLSearchParams(location.search);\r\n\t\t\tif (searchParams.get('category')) {\r\n\t\t\t\tdispatch(setCategory(Number.parseInt(searchParams.get('category'))));\r\n\t\t\t\tdispatch(setCategoryName(data.categories[0][0].find(cat => cat.id === Number.parseInt(searchParams.get('category'))).type));\r\n\t\t\t}\r\n\t\t}\r\n\t}, [data]);*/\r\n\r\n\tfunction clear() {\r\n\t\tdispatch(setCategory(null));\r\n\t\tdispatch(setCategoryName(null));\r\n\t\tdispatch(setLastArgs({...lastArgs, category: undefined}));\r\n\t\t/*let searchParams = new URLSearchParams(location.search);\r\n\t\tsearchParams.delete('category');\r\n\t\twindow.history.replaceState({}, '', `${location.pathname}?${searchParams}`);*/\r\n\t}\r\n\r\n\tfunction output(num) {\r\n\t\tdispatch(setCategory(num));\r\n\t\tdispatch(setCategoryName(data.categories[0][0].find(cat => cat.id === num).type));\r\n\t\tdispatch(setLastArgs({...lastArgs, category: num}));\r\n\t\t/*let searchParams = new URLSearchParams(location.search);\r\n\t\tsearchParams.set('category', num.toString());\r\n\t\twindow.history.replaceState({}, '', `${location.pathname}?${searchParams}`);*/\r\n\t}\r\n\r\n\tlet rows = [];\r\n\tif (data)\r\n\t\tfor (let i = 0; i < data.categories[0][0].length; i++) {\r\n\t\t\trows.push(<Link id={data.categories[0][0][i].id} isActive={isActive === data.categories[0][0][i].id} name={data.categories[0][0][i].type} func={output}/>);\r\n\t\t}\r\n\t\r\n\r\n\treturn (\r\n\t\t/*<div className=\"xs:w-full sm:w-full md:w-1/3 lg:w-1/4 mt-3\">\r\n\t\t\t<div className=\"flex p-3 bg-light\">\r\n\t\t\t\t<aside id=\"categories\">\r\n\t\t\t\t\t<div className=\"dropdown\">\r\n\t\t\t\t\t\t{rows}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</aside>\r\n\t\t\t</div>\r\n\t\t</div>*/\r\n\t\t<span className=\"text-lg\">\r\n\t\t\t{rows}\r\n\t\t\t<div>-----</div>\r\n\t\t\t<button onClick={clear}>Очистить</button>\r\n\t\t</span>\r\n\t);\r\n}\r\n\r\nexport default CategoriesBar;","import React from \"react\";\r\n\r\nfunction Link(props) {\r\n\r\n\tfunction handleClick() {\r\n\t\tprops.func(props.id);\r\n\t}\r\n\r\n    let classLink = \"category-link\";\r\n    if (props.isActive) {\r\n        classLink += \" active\";\r\n    }\r\n    return ( <div><span className={classLink} href=\"#\" onClick={handleClick}>{props.name}</span></div> );\r\n}\r\n\r\nexport default Link;","import React from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport { goodsAPI, useFetchGoodsByIdQuery } from \"../store/services/goods_service\";\r\nimport { Carousel, Card } from \"flowbite-react\";\r\nimport { YMaps, Map, Placemark } from \"@pbe/react-yandex-maps\";\r\n\r\nfunction ProductWrapper(props) {\r\n\t/*constructor(props) {\r\n\t\tsuper(props);\r\n\t\t//this.state = { goods: 0 };\r\n\t\tthis.getGoods = this.getGoods.bind(this);\r\n\t}\r\n\r\n\tcomponentDidMount() {\r\n        console.log(1000);\r\n        this.getGoods();\r\n    }\r\n\r\n\tgetGoods() {\r\n\t\t/*const data = new FormData();\r\n\t\tdata.append('command', 'getGoods');\r\n\t\tdata.append('since', 0);*/\r\n\t\t//let searchParams = new URLSearchParams(location.search);\r\n\t\t/*fetch('/api', {\r\n\t\t\tmethod: 'POST',\r\n\t\t    headers: {\r\n\t\t      'Accept': 'application/json',\r\n\t\t      'Content-Type': 'application/json'\r\n\t\t    },\r\n\t\t    body: JSON.stringify({ command: 'getGoodsById', id: window.location.pathname.split('/').pop() || window.location.pathname.split('/').slice(0, -1).pop() })\r\n\t\t}).then(response => {\r\n\t\t\tresponse.json().then(body => {\r\n\t\t\t\tthis.setState({ goods: body.goods[0] });\r\n\t\t\t\t//console.log(this.state.goods);\r\n\t\t\t});\r\n\t\t});*/\r\n\t\t//id: window.location.href.match(\"goods/(.+)#?\")[1]\r\n\t\t//console.log(10);\r\n\t\t/*this.props.fetchGoodsById(window.location.pathname.split('/').pop() || window.location.pathname.split('/').slice(0, -1).pop());\r\n\t}*/\r\n\r\n\tconst { data, isLoading, error } = useFetchGoodsByIdQuery(window.location.pathname.split('/').pop() || window.location.pathname.split('/').slice(0, -1).pop());\r\n\r\n\t/*render() {\r\n\t\tconst id = window.location.pathname.split('/').pop() || window.location.pathname.split('/').slice(0, -1).pop();\r\n\t\tlet goods = this.props.fetchGoodsByIdState(id);\r\n\t\tlet rows = null;\r\n\t\t//console.log(goods);\r\n\t\tif (!goods.isLoading &&\r\n\t\t\t!goods.isUninitialized) {\r\n\t\t\tif (!goods.isError) {\r\n\t\t\t\tgoods = goods.data.goods[0][0];\r\n\t\t\t\tconsole.log(goods);\r\n\t\t\t\t//console.log(goods);\r\n\t\t\t\trows = (<Product id={goods.id} name={goods.name} img={goods.photos} price={goods.price}\r\n\t\t\t\t\tcreatedAt={goods.created_at} desc={goods.description} views={goods.views} />);\r\n\t\t\t} else {\r\n\t\t\t\trows = goods.error.data.error;\r\n\t\t\t}\r\n\t\t}\r\n\t\telse {\r\n\t\t\trows = 'Подождите, идет загрузка...';\r\n\t\t}*/\r\n\t\treturn (\r\n\t\t\t<div class=\"mb-3 mt-3\">\r\n\t\t\t\t<main>\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tisLoading ? \"Подождите, идет загрузка...\" : error ? error.data.error : \r\n\t\t\t\t\t\t\t<Product id={data.goods[0][0].id} name={data.goods[0][0].name} img={data.goods[0][0].photos} price={data.goods[0][0].price}\r\n\t\t\t\t\t\t\t\tcreatedAt={data.goods[0][0].created_at} desc={data.goods[0][0].description} views={data.goods[0][0].views}\r\n\t\t\t\t\t\t\t\tlat={data.goods[0][0].latitude} lon={data.goods[0][0].longitude} />\r\n\t\t\t\t\t}\r\n\t\t\t\t</main>\r\n\t\t\t</div>\r\n\t\t);\r\n\t//}\r\n}\r\n\r\nclass Product extends React.Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t}\r\n\r\n\trender() {\r\n\t\t//console.log(this.props.id);\r\n\t\tlet date = new Date(this.props.createdAt);\r\n\t\tlet dateStr = date.toLocaleString('ru', {\r\n\t        year: 'numeric',\r\n\t        month: 'long',\r\n\t        day: 'numeric',\r\n\t        hour: 'numeric',\r\n\t        minute: 'numeric'\r\n\t      });\r\n\t\t/*let butImg = [];\r\n\t\tfor (let i = 0; i < this.props.img.length; i++) {\r\n\t\t\tif (i == 0)\r\n\t\t\t\tbutImg.push(<button type=\"button\" data-bs-target={\"#carouselGoodsIndicators\" + this.props.id} data-bs-slide-to={i} className=\"active\" aria-current=\"true\" aria-label={\"Slide \" + i}></button>);\r\n\t\t\telse\r\n\t\t\t\tbutImg.push(<button type=\"button\" data-bs-target={\"#carouselGoodsIndicators\" + this.props.id} data-bs-slide-to={i} aria-label={\"Slide \" + i}></button>);\r\n\t\t}\r\n\t\tlet img = [];\r\n\t\tfor (let i = 0; i < this.props.img.length; i++) {\r\n\t\t\tif (i == 0)\r\n\t\t\t\timg.push(<div className=\"carousel-item active\"><img className=\"d-block w-100\" src={\"/goods_photos/\" + this.props.img[i]} alt={\"Slide \" + i}/></div>);\r\n\t\t\telse\r\n\t\t\t\timg.push(<div className=\"carousel-item\"><img className=\"d-block w-100\" src={\"/goods_photos/\" + this.props.img[i]} alt={\"Slide \" + i}/></div>);\r\n\t\t}*/\r\n\t\treturn (\r\n\t\t\t<div>\r\n\t\t\t\t<a className=\"text-4xl ml-24\" href=\"/\">Перейти на главную</a>\r\n\t\t\t\t<div className=\"w-4/5 md:3/4 lg:w-1/3 mx-auto mt-10\">\r\n\t\t\t\t\t<Card>\r\n\t\t\t\t\t\t<div className=\"h-72 w-1/2 mx-auto\">\r\n\t\t\t\t\t\t\t<Carousel slide={false} leftControl={<></>} rightControl={<></>}>\r\n\t\t\t\t\t\t\t\t{this.props.img.map(img => <img src={\"/goods_photos/\" + img} alt=\"slide\" />)}\r\n\t\t\t\t\t\t\t</Carousel>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div className=\"card-one-goods pt-5\">\r\n\t\t\t\t\t\t\t<h5 className=\"text-3xl\">{this.props.name}</h5>\r\n\t\t\t\t\t\t\t<p>{this.props.desc}</p>\r\n\t\t\t\t\t\t\t<p>{this.props.price + \"₽\"}</p>\r\n\t\t\t\t\t\t\t<p><small className=\"text-muted\">{dateStr}</small></p>\r\n\t\t\t\t\t\t\t<p><small className=\"text-muted\">Просмотры: {this.props.views}</small></p>\r\n\t\t\t\t\t\t\t<YMaps>\r\n\t\t\t\t\t\t\t\t<Map defaultState={{ center: [this.props.lat, this.props.lon], zoom: 9}}>\r\n\t\t\t\t\t\t\t\t\t<Placemark geometry={[this.props.lat, this.props.lon]} />\r\n\t\t\t\t\t\t\t\t</Map>\r\n\t\t\t\t\t\t\t</YMaps>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</Card>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t);\r\n\r\n\t\t/*<div id={\"carouselGoodsIndicators\" + this.props.id} data-bs-interval=\"false\" className=\"carousel slide col-xs-12 col-sm-12 col-md-6 col-lg-6\" data-bs-ride=\"carousel\" style={{float: 'left'}}>\r\n\t\t\t<div className=\"carousel-indicators\">\r\n\t\t\t{butImg}\r\n\t\t\t</div>\r\n\t\t\t<div className=\"carousel-inner\">\r\n\t\t\t{img}\r\n\t\t\t</div>\r\n\t\t\t<button className=\"carousel-control-prev\" type=\"button\" data-bs-target={\"#carouselGoodsIndicators\" + this.props.id} data-bs-slide=\"prev\">\r\n\t\t\t<span className=\"carousel-control-prev-icon\" aria-hidden=\"true\"></span>\r\n\t\t\t<span className=\"visually-hidden\">Previous</span>\r\n\t\t\t</button>\r\n\t\t\t<button className=\"carousel-control-next\" type=\"button\" data-bs-target={\"#carouselGoodsIndicators\" + this.props.id} data-bs-slide=\"next\">\r\n\t\t\t<span className=\"carousel-control-next-icon\" aria-hidden=\"true\"></span>\r\n\t\t\t<span className=\"visually-hidden\">Next</span>\r\n\t\t\t</button>\r\n\t\t</div>*/\r\n\t}\r\n}\r\n\r\n/*const mapStateToProps = (state) => {\r\n    return {\r\n\t\tfetchGoodsByIdState: (id) => goodsAPI.endpoints.fetchGoodsById.select(id)(state)\r\n    };\r\n}\r\n\r\nconst mapDispatchToProps = {\r\n    fetchGoodsById: goodsAPI.endpoints.fetchGoodsById.initiate//(args) => dispatch(goodsAPI.endpoints.fetchAllGoods.initiate(args)) //(args) => dispatch(getGoodsFromAPI(args))\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(ProductWrapper);*/\r\n\r\nexport default ProductWrapper;\r\n\r\n/*class SearchGoods extends React.Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t}\r\n\r\n\tgoToIndex(event) {\r\n\t\twindow.open('/?search=true&query=' + document.getElementById(\"search\").value);\r\n\t}\r\n\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<div style={{textAlign: 'center', marginBottom: '25px'}}>\r\n\t\t\t\t<input type=\"text\" class=\"form-control\" id=\"search\" style={{display: 'inline', width: '60vw', marginRight: '10px'}}/>\r\n\t\t\t\t<button type=\"button\" class=\"btn btn-primary\" onClick={this.goToIndex} style={{display: 'inline'}}>Найти!</button>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}*/\r\n\r\n/*ReactDOM.render(\r\n  <ProductWrapper />,\r\n  document.getElementById('goods-min')\r\n);\r\n\r\nReactDOM.render(\r\n  <SearchGoods />,\r\n  document.getElementById('search-wrapper')\r\n);*/","import React, { useState } from 'react';\r\nimport { connect, useDispatch, useSelector } from 'react-redux';\r\nimport { bindActionCreators } from '@reduxjs/toolkit';\r\nimport { fetchAllGoodsState, goodsAPI } from '../store/services/goods_service';\r\nimport { store } from '../app';\r\nimport { setLastArgs } from '../store/reducers/goods_slice';\r\nimport { Carousel } from 'flowbite-react';\r\nimport { Card } from 'flowbite-react';\r\nimport { useFetchAllGoodsCatsQuery, useFetchAllGoodsQuery } from '../store/services/goods_service';\r\nimport { calcCrow } from '../math/distance';\r\nimport { useEffect } from 'react';\r\n\r\nfunction GoodsMin(props) {\r\n//\tunsubscribe = null;\r\n\r\n\t/*constructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.state = {goods: null, count: null, isLoading: null, error: null};\r\n\t\tthis.move = this.move.bind(this);\r\n\t\t//this.state = { lastArgs: null };\r\n\t\t//this.state = { goods: useSelector((state) => state.goods) };\r\n\t\t//this.getNew = this.getNew.bind(this);\r\n\t\t//this.getPopular = this.getPopular.bind(this);\r\n  \t\t//this.dispatch = useDispatch();\r\n\t\t//const subscriptionChangeState = this.props.emitter.subscribe(\"CHANGE\", (state) => this.setState({ goods: state }));\r\n\t}\r\n\r\n\t/*componentDidUpdate(prevProps) {\r\n\t\tif (this.state.first || JSON.stringify(this.props.lastArgs) !== JSON.stringify(prevProps.lastArgs)) {\r\n\t\t\tthis.setState({first: false});\r\n\t\t\tconsole.log(this.props.lastArgs);\r\n\t\t\tthis.props.fetchAllGoods(this.props.lastArgs);\r\n\t\t}\r\n\t}*/\r\n\r\n\t//getNew() {\r\n\t\t/*const data = new FormData();\r\n\t\tdata.append('command', 'getGoods');\r\n\t\tdata.append('since', 0);*/\r\n\t\t/*fetch('/api', {\r\n\t\t\tmethod: 'POST',\r\n\t\t    headers: {\r\n\t\t      'Accept': 'application/json',\r\n\t\t      'Content-Type': 'application/json'\r\n\t\t    },\r\n\t\t    body: JSON.stringify({command: 'getNew', since: 0})\r\n\t\t}).then(response => {\r\n\t\t\tresponse.json().then(body => {\r\n\t\t\t\tthis.setState({ goods: body.goods[0] });\r\n\t\t\t});\r\n\t\t});*/\r\n\t\t/*const searchParams = new URLSearchParams(location.search);\r\n\t\tthis.props.sendAPIRequest({ command: 'searchGoods', word: (searchParams.get('query') && searchParams.get('query').length > 1) ? searchParams.get('query') : \"\", since: 0, sort: 'new' }, '/api', 'POST').then(resolve => {\r\n\t\t\tif (resolve.body.goods[0].length == 0) {\r\n\t\t\t\tthis.props.updateGoods('Ничего не найдено!');\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tthis.props.updateGoods(resolve.body.goods[0]);\r\n\t\t}).catch(reject => {\r\n\t\t\tthis.props.updateGoods(reject.error);\r\n\t\t});*/\r\n\t\t\r\n\t\t//const searchParams = new URLSearchParams(location.search);\r\n\t\t//this.props.getGoodsFromAPI((searchParams.get('query') && searchParams.get('query').length > 1) ? searchParams.get('query') : \"\", 0, 'new');\r\n\t\t\r\n\t\t/*const searchParams = new URLSearchParams(location.search);\r\n\t\tthis.props.getGoodsAll({ word: ((searchParams.get('query') && searchParams.get('query').length > 1) ?\r\n\t\t\tsearchParams.get('query') : \"\"), since: 0, sort: 'new'});*/\r\n\t\t//console.log(10);\r\n\t//}\r\n\r\n\t//getPopular() {\r\n\t\t/*const searchParams = new URLSearchParams(location.search);\r\n\t\tthis.props.sendAPIRequest({ command: 'searchGoods', word: (searchParams.get('query') && searchParams.get('query').length > 1) ? searchParams.get('query') : \"\", since: 0, sort: 'popular' }, '/api', 'POST').then(resolve => {\r\n\t\t\tif (resolve.body.goods[0].length == 0) {\r\n\t\t\t\tthis.props.updateGoods('Ничего не найдено!');\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tthis.props.updateGoods(resolve.body.goods[0]);\r\n\t\t}).catch(reject => {\r\n\t\t\tthis.props.updateGoods(reject.error);\r\n\t\t});*/\r\n\t\t\r\n\t\t//const searchParams = new URLSearchParams(location.search);\r\n\t\t//this.props.getGoodsFromAPI((searchParams.get('query') && searchParams.get('query').length > 1) ? searchParams.get('query') : \"\", 0, 'popular');\r\n\t\t/*const searchParams = new URLSearchParams(location.search);\r\n\t\tthis.props.getGoodsAll({ word: ((searchParams.get('query') && searchParams.get('query').length > 1) ?\r\n\t\t\tsearchParams.get('query') : \"\"), since: 0, sort: 'popular'})\r\n\t}*/\r\n\r\n\tconst dispatch = useDispatch()\r\n\r\n\tconst lastArgs = useSelector((state) => state.goodsReducer.lastArgs);\r\n\tconst activeCategoryName = useSelector((state) => state.categoriesReducer.activeCategoryName);\r\n\r\n\tlet query\r\n    if (lastArgs.category)\r\n        query = useFetchAllGoodsCatsQuery\r\n    else\r\n        query = useFetchAllGoodsQuery\r\n\r\n    const { data, error, isLoading } = query(lastArgs)\r\n\r\n\t//componentDidUpdate(prevProps) {\r\n\t\t/*let fetch = this.props.lastArgs?.category ? this.props.fetchAllGoodsCatsState : this.props.fetchAllGoodsState\r\n\t\tlet fetch2 = prevProps.lastArgs?.category ? prevProps.fetchAllGoodsCatsState : prevProps.fetchAllGoodsState\r\n\t\tif (fetch(this.props.lastArgs).isLoading !== fetch2(prevProps.lastArgs).isLoading ||\r\n\t\t\tfetch(this.props.lastArgs).isUninitialized !== fetch2(prevProps.lastArgs).isUninitialized ||\r\n\t\t\tfetch(this.props.lastArgs).isError !== fetch2(prevProps.lastArgs).isError ||\r\n\t\t\tfetch(this.props.lastArgs).data !== fetch2(prevProps.lastArgs).data) {\r\n\t\t\tif (!fetch(this.props.lastArgs).isLoading &&\r\n\t\t\t\t!fetch(this.props.lastArgs).isUninitialized) {\r\n\t\t\t\tif (!fetch(this.props.lastArgs).isError) {\r\n\t\t\t\t\tthis.setState({goods: fetch(this.props.lastArgs).data.goods[0].rows, count: fetch(this.props.lastArgs).data.goods[0].count});\r\n\t\t\t\t\t//console.log(goods);\r\n\t\t\t\t\t/*for (let i = 0; i < goods.length; i++)\r\n\t\t\t\t\t\trows.push(<MyCard id={goods[i].id} name={goods[i].name} img={goods[i].photos} price={goods[i].price}\r\n\t\t\t\t\t\t\tcreatedAt={goods[i].created_at} nickname={goods[i].user?.nickname}\r\n\t\t\t\t\t\t\trating={goods[i].user?.rating} />);*/\r\n\t\t\t\t\t/*if (rows.length < 12)\r\n\t\t\t\t\t\twhile (rows.length < 12)\r\n\t\t\t\t\t\t\trows.push(<div></div>)*/\r\n\t\t\t\t/*} else {\r\n\t\t\t\t\t//rows = fetch(this.props.lastArgs).error.data.error;\r\n\t\t\t\t\tthis.setState({isError: fetch(this.props.lastArgs).error.data.error});\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\t//rows = 'Подождите, идет загрузка...';\r\n\t\t\t\tthis.setState({isLoading: 'Подождите, идет загрузка...'});\r\n\t\t\t}\r\n\t\t}*/\r\n\t\t/*if (this.props !== prevProps) {\r\n\t\t\tconsole.log(this.props.fetchAllGoodsState(this.props.lastArgs).data);\r\n\t\t}\r\n\t}*/\r\n\r\n\t//componentDidUpdate(prevProps) {\r\n/*\r\n\t\tconst { fetchAllGoods } = this.props;\r\n\t\t// Start a subscription for the component to the cached data\r\n\t\tconst { unsubscribe } = fetchAllGoods();\r\n\t\r\n\t\t// Store the unsubscribe promise for later use\r\n\t\tthis.unsubscribe = unsubscribe;\r\n*/\r\n\r\n\t/*\tif (this.state.first || JSON.stringify(this.props.lastArgs) !== JSON.stringify(prevProps.lastArgs)) {\r\n\t\t\tthis.setState({first: false});\r\n\t\t\tconst searchParams = new URLSearchParams(location.search);\r\n\t\t\tlet lastArgs = { word: ((searchParams.get('query') && searchParams.get('query').length > 1) ?\r\n\t\t\t\tsearchParams.get('query') : \"\"), since: 0};\r\n\t\t\tif (!searchParams.get('category')) {\r\n\t\t\t\tif (searchParams.get('sort') == 'new' || !searchParams.get('sort')) {\r\n\t\t\t\t\tthis.props.fetchAllGoods({ ...lastArgs, sort: 'new' });\r\n\t\t\t\t\tthis.props.setLastArgs({ ...lastArgs, sort: 'new' });\r\n\t\t\t\t\t//this.setState({ lastArgs: { ...lastArgs, sort: 'new' } });\r\n\t\t\t\t}\r\n\t\t\t\telse if (searchParams.get('sort') == 'popular') {\r\n\t\t\t\t\tthis.props.fetchAllGoods({ ...lastArgs, sort: 'popular' });\r\n\t\t\t\t\tthis.props.setLastArgs({ ...lastArgs, sort: 'popular' });\r\n\t\t\t\t\t//this.setState({ lastArgs: { ...lastArgs, sort: 'popular' } });\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tif (searchParams.get('sort') == 'new' || !searchParams.get('sort')) {\r\n\t\t\t\t\tthis.props.fetchAllGoodsCats({ ...lastArgs, sort: 'new', category: searchParams.get('category') });\r\n\t\t\t\t\tthis.props.setLastArgs({ ...lastArgs, sort: 'new', category: searchParams.get('category') });\r\n\t\t\t\t}\r\n\t\t\t\telse if (searchParams.get('sort') == 'popular') {\r\n\t\t\t\t\tthis.props.fetchAllGoodsCats({ ...lastArgs, sort: 'popular', category: searchParams.get('category') });\r\n\t\t\t\t\tthis.props.setLastArgs({ ...lastArgs, sort: 'popular', category: searchParams.get('category') });\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}*/\r\n\r\n\t/*componentDidUpdate(prevProps) {\r\n\t\tif (this.props.goods !== prevProps.goods)\r\n\t\t\tthis.setState({goods: this.props.goods});\r\n\t}*/\r\n\r\n\t/*componentWillReceiveProps(nextProps) {\r\n\t\tconsole.log(nextProps.goods);\r\n\t\tif (!nextProps.goods) {\r\n\t\t\tconsole.log(10000000000000);\r\n\t\t\tif (!window.location.href.match(\"search=true\")) {\r\n\t\t\t\tif (window.location.href.match(\"sort=new\") || !window.location.href.match(\"sort\")) {\r\n\t\t\t\t\tthis.getNew();\r\n\t\t\t\t}\r\n\t\t\t\telse if (window.location.href.match(\"sort=popular\")) {\r\n\t\t\t\t\tthis.getPopular();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\telse {\r\n\t\t\tthis.setState({goods: nextProps.goods});\r\n\t\t}\r\n\t}*/\r\n\r\n\t/*componentWillReceiveProps(newProps) {\r\n\t\tconsole.log(newProps.goods);\r\n\t\tthis.setState({ goods: newProps.goods });\r\n\t}*/\r\n\r\n\tuseEffect(() => {\r\n\t\tgetLocation();\r\n\t}, []);\r\n\r\n\tfunction getLocation() {\r\n\t\tif (navigator.geolocation) {\r\n\t\t\tnavigator.geolocation.getCurrentPosition(showPosition);\r\n\t\t} else { \r\n\t\t\talert(\"Разрешите геолокацию чтобы видеть ближайшие товары...\");\r\n\t\t}\r\n\t}\r\n\t\t\r\n\tfunction showPosition(position) {\r\n\t\tdispatch(setLastArgs({...lastArgs, lat: position.coords.latitude, lon: position.coords.longitude}));\r\n\t}\r\n\r\n\tfunction move(arg) {\r\n\t\tif (arg === \"left\") {\r\n\t\t\tdispatch(setLastArgs({...lastArgs, since: lastArgs.since - 1}));\r\n\t\t\t/*let searchParams = new URLSearchParams(location.search);\r\n\t\t\tsearchParams.set('since', (this.props.lastArgs.since - 1).toString());\r\n\t\t\twindow.history.replaceState({}, '', `${location.pathname}?${searchParams}`);*/\r\n\t\t}\r\n\t\telse if (arg === \"right\") {\r\n\t\t\tdispatch(setLastArgs({...lastArgs, since: lastArgs.since + 1}));\r\n\t\t\t/*let searchParams = new URLSearchParams(location.search);\r\n\t\t\tsearchParams.set('since', (this.props.lastArgs.since + 1).toString());\r\n\t\t\twindow.history.replaceState({}, '', `${location.pathname}?${searchParams}`);*/\r\n\t\t}\r\n\t\telse {\r\n\t\t\tdispatch(setLastArgs({...lastArgs, since: arg - 1}));\r\n\t\t\t/*let searchParams = new URLSearchParams(location.search);\r\n\t\t\tsearchParams.set('since', arg.toString());\r\n\t\t\twindow.history.replaceState({}, '', `${location.pathname}?${searchParams}`);*/\r\n\t\t\r\n\t\t}\r\n\t}\r\n\r\n\t//render() {\r\n\t\t/*let rows = [];\r\n\t\tlet rowsGroups = [];\r\n\t\tlet j = 0;\r\n\t\tfor (let i = 0; i < this.state.goods.length; i++) {\r\n\t\t\trows.push(<Card name={this.state.goods[i].name} img={this.state.goods[i].photos} price={this.state.goods[i].price} createdAt={this.state.goods[i].created_at} />);\r\n\t\t\tj++;\r\n\t\t\tif (j == 3 || i == this.state.goods.length - 1) {\r\n\t\t\t\tj = 0;\r\n\t\t\t\trowsGroups.push(<div className=\"card-group\">{rows}</div>);\r\n\t\t\t\trows = [];\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn (\r\n\t\t\t<div>\r\n\t\t\t  {rowsGroups}\r\n\t\t\t</div>\r\n\t\t);*/\r\n\t\t//console.log(this.state.goods);\r\n\t\tlet rows = [];\r\n\t\t/*let count;*/\r\n\t\t//let fetchAllGoodsState = goodsAPI.endpoints.fetchAllGoods;\r\n\t\t//console.log(fetchAllGoodsState.select(this.state.lastArgs)(store.getState()));\r\n\t\t//console.log(fetchAllGoodsState);\r\n\t\t//console.log(this.state.lastArgs);\r\n\t\tif (isLoading) {\r\n\t\t\trows = isLoading;\r\n\t\t}\r\n\t\telse if (error) {\r\n\t\t\trows = error.data.error;\r\n\t\t}\r\n\t\telse if (data) {\r\n\t\t\trows = data.goods[0].rows.map((goods) => <MyCard id={goods.id} name={goods.name} img={goods.photos} price={goods.price}\r\n\t\t\t\tcreatedAt={goods.created_at} nickname={goods.user?.nickname}\r\n\t\t\t\trating={goods.user?.rating} distance={goods.distance} />);\r\n\t\t}\r\n\r\n\t\t//console.log(this.props.fetchAllGoodsState(this.props.lastArgs));\r\n\t\t\r\n\t\t\r\n\t\t//console.log(fetchAllGoodsState(store.getState()));\r\n\t\t//console.log(this.props.activeCategoryName)\r\n\t\t//console.log(this.props.lastArgs);\r\n\t\treturn (\r\n\t\t\t//<div className=\"col-xs-12 col-sm-12 col-md-8 col-lg-9 mb-3 mt-3\">\r\n\t\t\t<>\r\n\t\t\t\t<h3 className=\"text-3xl mb-4\">{activeCategoryName ?? \"Все категории\"}</h3>\r\n\t\t\t\t<main id=\"goods-min\">\r\n\t\t\t  \t\t{rows}\r\n\t\t\t\t</main>\r\n\t\t\t\t{data && data.goods[0].count > 0 ? <button onClick={() => lastArgs?.since > 0 && move(\"left\")}>&#60;</button> : null}\r\n\t\t\t\t{data && data.goods[0].count > 0 && lastArgs?.since > 1 ? \"...\" : null}\r\n\t\t\t\t{data && data.goods[0].count > 0 && lastArgs?.since > 0\t? <button onClick={() => move(lastArgs?.since)}>{lastArgs?.since}</button> : null}\r\n\t\t\t\t{data && data.goods[0].count > 0 ? <button className=\"underline\" onClick={() => move(lastArgs?.since + 1)}>{lastArgs?.since + 1}</button> : null}\r\n\t\t\t\t{data && data.goods[0].count > (lastArgs?.since + 1) * 4 ? <button onClick={() => move(lastArgs?.since + 2)}>{lastArgs?.since + 2}</button> : null}\r\n\t\t\t\t{data && data.goods[0].count > (lastArgs?.since + 2) * 4 ? \"...\" : null}\r\n\t\t\t\t{data && data.goods[0].count > 0 ? <button onClick={() => (lastArgs?.since + 1) * 4 < data.goods[0].count && move(\"right\")}>&#62;</button> : null}\r\n\t\t\t</>\r\n\t\t\t//</div>\r\n\t\t);\r\n\t//}\r\n}\r\n\r\nfunction MyCard(props) {\r\n\t/*constructor(props) {\r\n\t\tsuper(props);\r\n\t}\r\n\r\n\trender() {*/\r\n\t\t/*let date = new Date(this.props.createdAt);\r\n\t\tlet dateStr = date.toLocaleString('ru', {\r\n\t        year: 'numeric',\r\n\t        month: 'long',\r\n\t        day: 'numeric',\r\n\t        hour: 'numeric',\r\n\t        minute: 'numeric'\r\n\t      });\r\n\t\tlet butImg = [];\r\n\t\t//console.log(this.props.img);\r\n\t\tfor (let i = 0; i < this.props.img.length; i++) {\r\n\t\t\tif (i == 0)\r\n\t\t\t\tbutImg.push(<button type=\"button\" data-bs-target={\"#carouselGoodsIndicators\" + this.props.id} data-bs-slide-to={i} className=\"active\" aria-current=\"true\" aria-label={\"Slide \" + i}></button>);\r\n\t\t\telse\r\n\t\t\t\tbutImg.push(<button type=\"button\" data-bs-target={\"#carouselGoodsIndicators\" + this.props.id} data-bs-slide-to={i} aria-label={\"Slide \" + i}></button>);\r\n\t\t}\r\n\t\tlet img = [];\r\n\t\tfor (let i = 0; i < this.props.img.length; i++) {\r\n\t\t\tif (i == 0)\r\n\t\t\t\timg.push(<div className=\"carousel-item active\"><img className=\"d-block w-100\" src={\"goods_photos/\" + this.props.img[i]} alt={\"Slide \" + i}/></div>);\r\n\t\t\telse\r\n\t\t\t\timg.push(<div className=\"carousel-item\"><img className=\"d-block w-100\" src={\"goods_photos/\" + this.props.img[i]} alt={\"Slide \" + i}/></div>);\r\n\t\t}*/\r\n\r\n\t\tlet date = new Date(props.createdAt);\r\n\t\tlet dateStr = date.toLocaleString('ru', {\r\n\t        year: 'numeric',\r\n\t        month: 'long',\r\n\t        day: 'numeric',\r\n\t        hour: 'numeric',\r\n\t        minute: 'numeric'\r\n\t      });\r\n\t\treturn (\r\n\t\t\t/*<div className=\"col-xs-12 col-sm-12 col-md-4 col-lg-3\"  style={{float: 'left', height: '450px'}}>\r\n\t\t\t\t<div className=\"card m-1\">\r\n\t\t\t\t\t<div id={\"carouselGoodsIndicators\" + this.props.id} data-bs-interval=\"false\" className=\"carousel slide\" data-bs-ride=\"carousel\">\r\n\t\t\t\t\t<div className=\"carousel-indicators\">\r\n\t\t\t\t\t\t{butImg}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className=\"carousel-inner\">\r\n\t\t\t\t\t\t{img}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<button className=\"carousel-control-prev\" type=\"button\" data-bs-target={\"#carouselGoodsIndicators\" + this.props.id} data-bs-slide=\"prev\">\r\n\t\t\t\t\t\t<span className=\"carousel-control-prev-icon\" aria-hidden=\"true\"></span>\r\n\t\t\t\t\t\t<span className=\"visually-hidden\">Previous</span>\r\n\t\t\t\t\t</button>\r\n\t\t\t\t\t<button className=\"carousel-control-next\" type=\"button\" data-bs-target={\"#carouselGoodsIndicators\" + this.props.id} data-bs-slide=\"next\">\r\n\t\t\t\t\t\t<span className=\"carousel-control-next-icon\" aria-hidden=\"true\"></span>\r\n\t\t\t\t\t\t<span className=\"visually-hidden\">Next</span>\r\n\t\t\t\t\t</button>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className=\"card-body\">\r\n\t\t\t\t\t<a href={\"/goods/\" + this.props.id} target=\"_blank\" style={{color: \"black\"}}><h5 className=\"card-title\">{this.props.name.length > 45 ? this.props.name.substring(0, 45) + \"...\" : this.props.name}</h5></a>\r\n\t\t\t\t\t<p className=\"card-text\">{this.props.price + \"₽\"}</p>\r\n\t\t\t\t\t<p className=\"card-text\"><small className=\"text-muted\">{dateStr}</small></p>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>*/\r\n\t\t\t<Card className=\"h-96 mb-5 bg-neutral-200\">\r\n\t\t\t\t<Carousel className=\"goods-carousel\" slide={false} leftControl={<></>} rightControl={<></>}>\r\n\t\t\t\t\t{props.img.map(img => <img src={\"goods_photos/\" + img} alt=\"slide\" />)}\r\n\t\t\t\t</Carousel>\r\n\t\t\t\t<a href={\"/goods/\" + props.id} target=\"_blank\" style={{color: \"black\"}}><h5>{props.name.length > 45 ? props.name.substring(0, 20) + \"...\" : props.name}</h5></a>\r\n\t\t\t\t<p>{props.price + \"₽\"}</p>\r\n\t\t\t\t<p>\r\n\t\t\t\t\t<a href={props.nickname ? \"/users/\" + props.nickname : undefined}>{props.nickname ?? \"аноним\"}</a>\r\n\t\t\t\t\t<span className='inline-block px-5 float-right text-lg'>{props.rating ?? \"-\"}<img alt=\"star\" src=\"service_photos/star.png\" width=\"20\" className='inline'/></span>\r\n\t\t\t\t</p>\r\n\t\t\t\t{props.distance && <p><small className=\"text-muted\">{\"Расстояние: \" + (props.distance / 1000).toFixed(1) + \"км\"}</small></p>}\r\n\t\t\t\t<p><small className=\"text-muted\">{dateStr}</small></p>\r\n\t\t\t</Card>\r\n\t\t);\r\n\t//}\r\n}\r\n\r\n/*const mapStateToProps = (state) => {\r\n    return {\r\n\t\tfetchAllGoodsState: (args) => goodsAPI.endpoints.fetchAllGoods.select(args)(state),\r\n\t\tfetchAllGoodsCatsState: (args) => goodsAPI.endpoints.fetchAllGoodsCats.select(args)(state),\r\n\t\tlastArgs: state.goodsReducer.lastArgs,\r\n\t\tactiveCategoryName: state.categoriesReducer.activeCategoryName\r\n    };\r\n}*/\r\n\r\n/*goods: state.goodsReducer.goods,\r\nisLoading: state.goodsReducer.isLoading,\r\nerror: state.goodsReducer.error*/\r\n\r\n/*const mapDispatchToProps =  (dispatch) => {\r\n  return {\r\n    getGoodsAll: (word, since, sort) => dispatch(getGoodsFromAPI(word, since, sort))\r\n  }\r\n}*/\r\n\r\n/*const mapDispatchToProps = {\r\n    fetchAllGoods: goodsAPI.endpoints.fetchAllGoods.initiate,//(args) => dispatch(goodsAPI.endpoints.fetchAllGoods.initiate(args)) //(args) => dispatch(getGoodsFromAPI(args))\r\n\tfetchAllGoodsCats: goodsAPI.endpoints.fetchAllGoodsCats.initiate,\r\n\tsetLastArgs: setLastArgs\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(GoodsMin);*/\r\n\r\nexport default GoodsMin;\r\n\r\n/*ReactDOM.render(\r\n  <GoodsMin />,\r\n  document.getElementById('goods-min')\r\n);\r\n\r\nclass Search extends React.Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.getGoods = this.getGoods.bind(this);\r\n\t\tthis.getGoodsURL = this.getGoodsURL.bind(this);\r\n\t}\r\n\r\n\tcomponentDidMount() {\r\n        if (window.location.href.match(\"search=true\")) {\r\n        \tlet params = new URLSearchParams(new URL(window.location.href).search);\r\n\t\t\tlet query;\r\n\t\t\tlet sort;\r\n\t\t\tfor(let pair of params.entries()) {\r\n\t\t\t  if (pair[0] == 'query') {\r\n\t\t\t  \tquery = pair[1];\r\n\t\t\t  }\r\n\t\t\t  else if (pair[0] == 'sort') {\r\n\t\t\t  \tsort = pair[1];\r\n\t\t\t  }\r\n\t\t\t}\r\n        \tdocument.getElementById(\"search\").value = query;\r\n\t\t\tthis.getGoodsURL(query, 0, sort);\r\n\t\t}\r\n    }\r\n\r\n\tgetGoodsURL(query, since, sort) {\r\n\t\tfetch('/api', {\r\n\t\t\tmethod: 'POST',\r\n\t\t    headers: {\r\n\t\t      'Accept': 'application/json',\r\n\t\t      'Content-Type': 'application/json'\r\n\t\t    },\r\n\t\t    body: JSON.stringify({ command: 'searchGoods', word: query, since: since, sort: sort })\r\n\t\t}).then(response => {\r\n\t\t\tresponse.json().then(body => {\r\n\t\t\t\temitter.emit(\"CHANGE\", body.goods[0]);\r\n\t\t\t});\r\n\t\t});\r\n\t}*/\r\n\r\n\t/*getGoods(event) {\r\n\t\tfetch('/api', {\r\n\t\t\tmethod: 'POST',\r\n\t\t    headers: {\r\n\t\t      'Accept': 'application/json',\r\n\t\t      'Content-Type': 'application/json'\r\n\t\t    },\r\n\t\t    body: JSON.stringify({ command: 'searchGoods', word: document.getElementById(\"search\").value, since: 0 })\r\n\t\t}).then(response => {\r\n\t\t\tresponse.json().then(body => {\r\n\t\t\t\temitter.emit(\"CHANGE\", body.goods[0]);\r\n\t\t\t});\r\n\t\t});\r\n\t}*/\r\n\r\n\t/*getGoods(event) {\r\n\t\tconst url = new URL(window.location);\r\n\t\turl.searchParams.set('search', 'true');\r\n\t\turl.searchParams.set('query', document.getElementById(\"search\").value);\r\n\t\twindow.history.pushState({}, '', url);\r\n\t\twindow.location.reload();\r\n\t}\r\n\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<div style={{textAlign: 'center', marginBottom: '25px'}}>\r\n\t\t\t\t<input type=\"text\" class=\"form-control\" id=\"search\" style={{display: 'inline', width: '60vw', marginRight: '10px'}}/>\r\n\t\t\t\t<button type=\"button\" class=\"btn btn-primary\" onClick={this.getGoods} style={{display: 'inline'}}>Найти!</button>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nReactDOM.render(\r\n  <Search />,\r\n  document.getElementById('search-wrapper')\r\n);\r\n\r\nvar links = [\r\n  \"Новые\",\r\n  \"Подписки\",\r\n  \"Популярные\"\r\n];\r\n\r\nclass NavBar extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.output = this.output.bind(this);\r\n    let params = new URLSearchParams(new URL(window.location.href).search);\r\n\tlet sort;\r\n\tfor(let pair of params.entries()) {\r\n\t  if (pair[0] == 'sort') {\r\n\t  \tsort = pair[1];\r\n\t  }\r\n\t}\r\n\tif (!sort || sort == 'new') {\r\n\t\tvar active = [true];\r\n\t    for (var i = 1; i < links.length; i++) {\r\n\t      active.push(false);\r\n\t    }\r\n\t}\r\n\telse if (sort == 'popular') {\r\n\t\tvar active = [];\r\n\t    for (var i = 0; i < links.length; i++) {\r\n\t      active.push(false);\r\n\t    }\r\n\t    active[2] = true;\r\n\t}\r\n\tthis.state = {isActive: active};\r\n  }\r\n\r\n  output = num => {\r\n    var active = [];\r\n    for (var i = 0; i < links.length; i++) {\r\n      active.push(false);\r\n    }\r\n    active[num] = true;\r\n    this.setState({ isActive : active});\r\n  }\r\n\r\n  render() {\r\n    var rows = [];\r\n    for (var i = 0; i < links.length; i++) {\r\n      rows.push(<Nav isActive={this.state.isActive[i]} name={links[i]} func={this.output}/>);\r\n    }\r\n    return (\r\n      <span>\r\n        {rows}\r\n        <LogReg/>\r\n      </span>\r\n    );\r\n  }\r\n}\r\n\r\nclass Nav extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    // Эта привязка обязательна для работы `this` в колбэке.\r\n    this.handleClick = this.handleClick.bind(this);\r\n  }\r\n\r\n  handleClick() {\r\n    var num;\r\n    for (var i = 0; i < links.length; i++) {\r\n      if (this.props.name == links[i]) {\r\n        num = i;\r\n      }\r\n    }\r\n    this.props.func(num);\r\n    if (this.props.name == \"Популярные\") {\r\n      const url = new URL(window.location);\r\n\t  url.searchParams.set('sort', 'popular');\r\n\t  window.history.pushState({}, '', url);\r\n\t  window.location.reload();\r\n    }\r\n    else if (this.props.name == \"Новые\") {\r\n      const url = new URL(window.location);\r\n\t  url.searchParams.set('sort', 'new');\r\n\t  window.history.pushState({}, '', url);\r\n\t  window.location.reload();\r\n    }\r\n  }\r\n\r\n  render() {\r\n    var ariaCurrent = this.props.isActive ? \"page\" : null;\r\n    var className = 'nav-link';\r\n    if (this.props.isActive) {\r\n      className += ' active';\r\n    }\r\n    return (\r\n      <li className=\"nav-item d-block d-sm-block d-md-inline-block\"><a href=\"#\" className={className} aria-current={ariaCurrent} onClick={this.handleClick}>{this.props.name}</a></li>\r\n    );\r\n  }\r\n}\r\n\r\nclass LogReg extends React.Component {\r\n  constructor(props) {\r\n  \tsuper(props);\r\n  \tthis.state = {logout: false, confirm: null, nick: null};\r\n  }\r\n  componentDidMount() {\r\n  \tfetch('/api', {\r\n\t\t\tmethod: 'POST',\r\n\t\t    headers: {\r\n\t\t      'Accept': 'application/json',\r\n\t\t      'Content-Type': 'application/json'\r\n\t\t    },\r\n\t\t    body: JSON.stringify({ command: 'isLoggedIn' })\r\n\t\t}).then(response => {\r\n\t\t\tresponse.json().then(body => {\r\n\t\t\t\tthis.setState({logout: body.logout, confirm: body.confirm, nick: body.nick});\r\n\t\t\t});\r\n\t\t});\r\n  }\r\n  render() {\r\n  \tconsole.log(this.state);\r\n  \tif (!this.state.logout) {\r\n  \t  return (\r\n\t    <li className=\"nav-item d-block d-sm-block d-md-inline-block px-3\"><a href=\"/logreg\" className=\"nav-link\" id=\"logreg\">Вход/Регистрация</a></li>\r\n\t  );\r\n  \t}\r\n    else {\r\n      return (\r\n      \t<div className=\"dropdown d-block d-sm-block d-md-inline-block px-3\">\r\n          <button className=\"btn btn-primary dropdown-toggle\" type=\"button\" id=\"dropdownMenuButton\" data-bs-toggle=\"dropdown\" aria-expanded=\"false\">\r\n            {this.state.nick} {this.state.confirm ? \"(осуществлен вход)\" : \"(требуется подтверждение почты)\"}\r\n          </button>\r\n          <ul className=\"dropdown-menu\" aria-labelledby=\"dropdownMenuButton\">\r\n            {this.state.confirm ? <li><a className=\"dropdown-item\" href=\"/goods/create\">Продать</a></li> : ''}\r\n            {this.state.confirm ? <li><a className=\"dropdown-item\" href=\"#\">Создано</a></li> : ''}\r\n            <li><a className=\"dropdown-item\" href=\"#\">Настройки</a></li>\r\n            <li><a className=\"dropdown-item\" href=\"/logout\">Выйти</a></li>\r\n          </ul>\r\n        </div>\r\n      );\r\n    }\r\n  }\r\n}\r\n\r\nReactDOM.render(\r\n  <NavBar />,\r\n  document.getElementById('nav')\r\n);*/","import React from \"react\";\r\n\r\nimport GoodsMin from './goods_min';\r\nimport CategoriesBar from './category/categories';\r\nimport ProductWrapper from'./goods';\r\n\r\nexport default class Main extends React.Component {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n    }\r\n\r\n    render() {\r\n        //console.log(this.props.goods);\r\n        if (this.props.goods || window.location.pathname === \"/\") {\r\n            return (\r\n                <div className=\"px-16 md:px-12\">\r\n                    <div className=\"w-full sm:w-full md:w-full lg:w-1/5 inline-block text-center sm:text-center md:text-center lg:text-left\">\r\n                        <CategoriesBar />\r\n                    </div>\r\n                    <div className=\"w-full sm:w-full md:w-full lg:w-4/5 inline-block float-right\">\r\n                        <GoodsMin />\r\n                    </div>\r\n                </div>\r\n            );\r\n        }\r\n        else {\r\n            return (\r\n                <ProductWrapper />\r\n            );\r\n        }\r\n    }\r\n}","export function calcCrow(lat1, lon1, lat2, lon2) {\r\n    var R = 6371; // km\r\n    var dLat = toRad(lat2-lat1);\r\n    var dLon = toRad(lon2-lon1);\r\n    var lat1 = toRad(lat1);\r\n    var lat2 = toRad(lat2);\r\n\r\n    var a = Math.sin(dLat/2) * Math.sin(dLat/2) +\r\n    Math.sin(dLon/2) * Math.sin(dLon/2) * Math.cos(lat1) * Math.cos(lat2); \r\n    var c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1-a)); \r\n    var d = R * c;\r\n    return d;\r\n}\r\n\r\n// Converts numeric degrees to radians\r\nexport function toRad(Value) {\r\n    return Value * Math.PI / 180;\r\n}"],"names":["React","useEffect","useState","useFetchAllCategoriesQuery","Link","useSelector","useDispatch","setCategory","setCategoryName","setLastArgs","CategoriesBar","props","isActive","state","categoriesReducer","activeCategory","lastArgs","goodsReducer","console","log","dispatch","_useFetchAllCategorie","data","error","isLoading","clear","_objectSpread","category","undefined","output","num","categories","find","cat","id","type","rows","i","length","push","createElement","name","func","className","onClick","handleClick","classLink","href","connect","goodsAPI","useFetchGoodsByIdQuery","Carousel","Card","YMaps","Map","Placemark","ProductWrapper","_useFetchGoodsByIdQue","window","location","pathname","split","pop","slice","Product","goods","img","photos","price","createdAt","created_at","desc","description","views","lat","latitude","lon","longitude","_React$Component","_inherits","_super","_createSuper","_classCallCheck","call","_createClass","key","value","render","date","Date","dateStr","toLocaleString","year","month","day","hour","minute","slide","leftControl","Fragment","rightControl","map","src","alt","defaultState","center","zoom","geometry","Component","bindActionCreators","fetchAllGoodsState","store","useFetchAllGoodsCatsQuery","useFetchAllGoodsQuery","calcCrow","GoodsMin","activeCategoryName","query","_query","getLocation","navigator","geolocation","getCurrentPosition","showPosition","alert","position","coords","move","arg","since","_goods$user","_goods$user2","MyCard","nickname","user","rating","distance","count","_props$nickname","_props$rating","target","style","color","substring","width","toFixed","Main","default","lat1","lon1","lat2","lon2","R","dLat","toRad","dLon","a","Math","sin","cos","c","atan2","sqrt","d","Value","PI"],"sourceRoot":""}